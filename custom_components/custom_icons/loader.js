const t=Object.freeze({left:0,top:0,width:16,height:16}),e=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),o=Object.freeze({...t,...e});Object.freeze({...o,body:"",hidden:!1});const n=Object.freeze({width:null,height:null}),i=Object.freeze({...n,...e}),s=/(-?[0-9.]*[0-9]+[0-9.]*)/g,a=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function c(t,e,o){if(1===e)return t;if(o=o||100,"number"==typeof t)return Math.ceil(t*e*o)/o;if("string"!=typeof t)return t;const n=t.split(s);if(null===n||!n.length)return t;const i=[];let c=n.shift(),r=a.test(c);for(;;){if(r){const t=parseFloat(c);isNaN(t)?i.push(c):i.push(Math.ceil(t*e*o)/o)}else i.push(c);if(c=n.shift(),void 0===c)return i.join("");r=!r}}async function r(){const t=await async function(){await Promise.race([customElements.whenDefined("home-assistant"),customElements.whenDefined("hc-main")]);const t=customElements.get("home-assistant")?"home-assistant":"hc-main";for(;!document.querySelector(t);)await new Promise((t=>window.setTimeout(t,100)));return document.querySelector(t)}();for(;!t.hass;)await new Promise((t=>window.setTimeout(t,100)));return t.hass}const h=t=>{var e,n;if(!t)return null;let s;return"iconify"==t.renderer?s=function(t,e){const n={...o,...t},s={...i,...e},a={left:n.left,top:n.top,width:n.width,height:n.height};let r=n.body;[n,s].forEach((t=>{const e=[],o=t.hFlip,n=t.vFlip;let i,s=t.rotate;switch(o?n?s+=2:(e.push("translate("+(a.width+a.left).toString()+" "+(0-a.top).toString()+")"),e.push("scale(-1 1)"),a.top=a.left=0):n&&(e.push("translate("+(0-a.left).toString()+" "+(a.height+a.top).toString()+")"),e.push("scale(1 -1)"),a.top=a.left=0),s<0&&(s-=4*Math.floor(s/4)),s%=4,s){case 1:i=a.height/2+a.top,e.unshift("rotate(90 "+i.toString()+" "+i.toString()+")");break;case 2:e.unshift("rotate(180 "+(a.width/2+a.left).toString()+" "+(a.height/2+a.top).toString()+")");break;case 3:i=a.width/2+a.left,e.unshift("rotate(-90 "+i.toString()+" "+i.toString()+")")}s%2==1&&(a.left!==a.top&&(i=a.left,a.left=a.top,a.top=i),a.width!==a.height&&(i=a.width,a.width=a.height,a.height=i)),e.length&&(r=function(t,e,o){const n=function(t,e="defs"){let o="";const n=t.indexOf("<"+e);for(;n>=0;){const i=t.indexOf(">",n),s=t.indexOf("</"+e);if(-1===i||-1===s)break;const a=t.indexOf(">",s);if(-1===a)break;o+=t.slice(i+1,s).trim(),t=t.slice(0,n).trim()+t.slice(a+1)}return{defs:o,content:t}}(t);return i=n.defs,s=e+n.content+o,i?"<defs>"+i+"</defs>"+s:s;var i,s}(r,'<g transform="'+e.join(" ")+'">',"</g>"))}));const h=s.width,l=s.height,u=a.width,f=a.height;let d,w;null===h?(w=null===l?"1em":"auto"===l?f:l,d=c(w,u/f)):(d="auto"===h?u:h,w=null===l?c(d,f/u):"auto"===l?f:l);const m={},p=(t,e)=>{(t=>"unset"===t||"undefined"===t||"none"===t)(e)||(m[t]=e.toString())};p("width",d),p("height",w);const g=[a.left,a.top,u,f];return m.viewBox=g.join(" "),{attributes:m,viewBox:g,body:r}}(t):(s=t,s.attributes={height:"1em",width:"1em",viewBox:t.viewBox.join(" ")}),{path:null!==(e=t.path)&&void 0!==e?e:"",secondaryPath:null!==(n=t.path2)&&void 0!==n?n:"",viewBox:s.viewBox,format:"custom_icons",innerSVG:s.body,attributes:s.attributes}},l={},u={},f=[],d=async()=>{const t=f.shift();if(void 0!==t){let e,o,n;[o,n,e]=t;const i=await(async(t,e)=>{var o;if(e.includes("#")&&(e=e.split("#")[0]),!(null===(o=l[t])||void 0===o?void 0:o[e])){if(!(await m(t)).some((t=>t.name==e)))return{path:"",viewBox:[0,0,0,0]};const o=(await r()).connection,n=await o.sendMessagePromise({type:"custom_icons/icon",set:t,icon:e});l[t][e]=h(n)}return l[t][e]})(o,n);e(i),setTimeout(d,1)}else setTimeout(d,50)},w=(t,e)=>new Promise((o=>f.push([t,e,o])));d();const m=async t=>{if(!u[t]){const e=(await r()).connection;u[t]=await e.sendMessagePromise({type:"custom_icons/list",set:t})}return u[t]};(async()=>{const t=(await r()).connection,e=await t.sendMessagePromise({type:"custom_icons/activesets"}),o=window;"customIcons"in o||(o.customIcons={});for(const t of e)l[t]={},o.customIcons[t]={getIcon:e=>w(t,e),getIconList:()=>m(t)};const n=(t,n)=>{e.includes(t)&&(l[n]={},o.customIcons[n]={getIcon:e=>w(t,e),getIconList:()=>m(t)})};n("custom","fapro"),n("fa-regular","far"),n("fa-solid","fas"),n("fa-brands","fab")})(),customElements.whenDefined("ha-icon").then((()=>{const t=customElements.get("ha-icon"),e=t.prototype._setCustomPath;t.prototype._setCustomPath=async function(t,o){var n;await(null===(n=null==e?void 0:e.bind(this))||void 0===n?void 0:n(t,o));const i=await t;if(o!==this.icon)return;if(!i.innerSVG||"custom_icons"!==i.format)return;await this.UpdateComplete;const s=this.shadowRoot.querySelector("ha-svg-icon");await(null==s?void 0:s.updateComplete);const a=null==s?void 0:s.shadowRoot.querySelector("svg");a&&(this._path=void 0,this._secondaryPath=void 0,a.innerHTML=i.innerSVG)};const o=t.prototype._loadIcon;t.prototype._loadIcon=async function(){this._loadIcon=o.bind(this),await this._loadIcon(),this._legacy&&window.setTimeout((()=>{this._legacy=!1,this._loadIcon()}),1e3)}}));
